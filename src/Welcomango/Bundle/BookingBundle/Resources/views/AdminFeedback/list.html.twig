{% extends "WelcomangoCoreBundle:AdminCRUD:index.html.twig" %}

{% trans_default_domain "crm" %}

{% block actions %}
    {{ button.create(path('admin_feedback_create'), 'feedback.create'|trans) }}
{% endblock %}

{% set pager_url = path('admin_feedback_list') %}
{% set number_per_page = false %}
{#{% set filter_url = path('experience_filters') %}#}

{% block filters %}
    {# {% include "YproxAdminCrmBundle:Experience:filter.html.twig" %}#}
{% endblock %}

{% block no_results %}
    <div class="alert">
        <strong>{{ 'interface.noresult'|trans({}, "interface") }}</strong>
    </div>
{% endblock %}

{% block table_head %}
    <tr>
        <th class="col-md-1">{{ knp_pagination_sortable(pagination, 'feedback.id'|trans, 'p.id')|raw }}</th>
        <th class="col-md-1">{{ "feedback.sender"|trans }}</th>
        <th class="col-md-1">{{ knp_pagination_sortable(pagination, 'feedback.receiver'|trans, 'p.user')|raw }}</th>
        <th class="col-md-4">{{ 'feedback.comment'|trans }}</th>
        <th class="col-md-1">{{ 'feedback.note'|trans }}</th>
        <th class="col-md-1">{{ 'feedback.booking'|trans }}</th>
        <th class="col-md-1">{{ 'feedback.status'|trans }}</th>
        <th class="col-md-2">{{ "interface.actions"|trans }}</th>
    </tr>
{% endblock %}

{% block table_body %}
    {% include "WelcomangoBookingBundle:AdminFeedback:_feedbackRow.html.twig" with { 'feedback' : entity } %}
{% endblock %}

{% block additionnal_content %}
    {# render(controller("YproxAdminCrmBundle:Experience:experiencesByLastLogin")) #}
{% endblock %}

{% block dashboard_search %}
    <input id="feedback_search" name="" type="text" class="no-boarder" placeholder="{{ "search.feedback"|trans }}" style="width:250px;">
{% endblock %}

{% block search_results %}
    <div id="feedback_results"></div>
{% endblock %}

{% block extra_actions %}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript">
        /*
         var timeout;
         $(document).ready(function () {
         $('#participation_search').val('');
         $('#participation_search').on('keyup', function (event) {
         var query = $(this).val();

         clearTimeout(timeout);

         if (query.length > 2) {
         timeout = setTimeout(function() {
         $('#spinner').css('display', 'inline');
         $.post("{{ path('admin_tag_search_ajax') }}", {'query': query}, function (response) {
         $.post("{{ path('admin_tag_search_ajax') }}", {'query': query}, function (response) {
         $('#spinner').css('display', 'none');
         $('#participation_results').html(response);
         }, 'html');
         }, 500);
         }
         };

         $('.form-filter-select2').select2({
         });
         });*/
    </script>

{% endblock %}

{% block stylesheets %}
    {{ parent() }}
{% endblock %}
